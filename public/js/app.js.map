{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$(document).ready(function() {\n\n    var vueData = {};\n\n    var newVue = function(vueData) {\n        new Vue({\n            el: '#workspace',\n            data: vueData,\n            methods: {\n                copyHtml: function() {\n                    this.collapseSelection('clone');\n                    this.cloneRenderedVersion();\n                    \n                    var range = document.createRange();\n                    var selection = document.querySelector('#clone');\n                    range.selectNode(selection)\n                    window.getSelection().addRange(range);\n                    var successful = document.execCommand('copy');\n                    var msg = successful ? 'successful' : 'not successful';\n                    console.log(msg);\n                    if (successful) {\n                        $('#highlight').effect('highlight', 'slow');\n                    }\n                },\n\n                copyTextVersion: function(trigger) {\n                    var clipboard = new Clipboard('#copyTextVersion', {\n                        //text: vueData.textVersion\n                        text: this.textVersion\n                    });\n\n                    clipboard.on('success', function(e) {\n                        clipboard.destroy();\n                    });\n\n\n                    clipboard.on('error', function(e) {\n                        clipboard.destroy();\n                    });\n                },\n\n                textVersion: function(trigger) {\n                    var component = trigger.dataset.component;\n                    switch (component) {\n                        case 'article':\n                            return [\n                                vueData.kicker,\n                                '------------------------------------' +\n                                    '------------------------------------',\n                                vueData.headline.toUpperCase(),\n                                vueData.excerpt,\n                                vueData.link,\n                                '\\n',\n                            ].join('\\n');\n                            \n                            break;\n                        case 'date':\n                            return [\n                                'Most recent posts: ' + vueData.date,\n                                '(http://thedo.osteopathic.org)',\n                                '\\n',\n                            ].join('\\n');\n                            \n                            break;\n                        \n                        case 'section-title':\n                            return [\n                                vueData.section_title,\n                                '\\n',\n                            ].join('\\n');\n                            \n                            break;\n                        \n                        case 'quote':\n                            return [\n                                '----------------------',\n                                'Q U O T E D',\n                                vueData.quote,\n                                '--' + vueData.quoter,\n                                vueData.link,\n                                '\\n'\n                            ].join('\\n');\n                            \n                            break;\n                    }\n                },\n\n                onClick: function() {\n                    console.log('onclick');\n                },\n\n                collapseSelection: function(elementId) {\n                    var elem = document.getElementById(elementId);\n                    if (window.getSelection()) {\n                        window.getSelection().collapse(elem, 0);\n                    }\n                },\n\n                cloneRenderedVersion: function() {\n                    var htmlVersion = document.getElementById('highlight');\n                    $('#clone').text(htmlVersion.innerHTML);\n                }\n            },\n            ready: function() {\n                console.log('ready');\n            },\n            attached: function() {\n                console.log('attached');\n            }\n        });\n    };\n\n    function getForm(form, selected) {\n        return $.ajax('form', {\n            data: form, \n            async: false,\n            success: function(data) {\n                $('#form').html(data);\n                console.log('got form');\n            }\n        })\n    };\n\n    function getRendered(selected) {\n        return $.ajax('render/' + selected, {\n            async: false,\n            success: function(data) {\n                $('#highlight').html(data);\n                console.log('got rendered');\n            }\n        });\n    };\n\n    function render() {\n        var selected = $('select#articleType').val();\n        var form = $('form#selectArticleType').serialize();\n        \n        // clear the cloned section\n        $('#workspace').fadeToggle(300, function() {\n            $('#clone').text('');\n            $('#highlight').html('');\n            $('#form').html('');\n\n            vueData = setVueData(selected);\n    \n            var request = getForm(form, selected),\n                chained = getRendered(selected);\n\n            chained.done(function() {\n                newVue(vueData);\n                // leave \"More stories\" in the input\n                if ($('input').val() != 'More stories') {\n                    $('input').val('');\n                }\n                $('#workspace').delay(300).fadeToggle(300);\n            });\n        });\n    };\n\n    function setVueData(selected) {\n        vueData = {};\n\n        switch (selected) {\n            case 'top-story':\n                vueData = {\n                    kicker: 'lorem kicker',\n                    headline: 'Lorem headline',\n                    excerpt: 'Lorem excerpt',\n                    link: '',\n                    imageUrl: 'http://placehold.it/480x320',\n                };\n                break;\n             case 'feature':\n                vueData = {\n                    kicker: 'lorem kicker',\n                    headline: 'Lorem headline',\n                    excerpt: 'Lorem excerpt',\n                    link: '',\n                    imageUrl: 'http://placehold.it/320x213',\n                    ruleBelow: true,\n                    ruleAbove: false,\n                };\n                break;\n             case 'brief':\n                vueData = {\n                    kicker: 'lorem kicker',\n                    headline: 'Lorem headline',\n                    excerpt: 'Lorem excerpt',\n                    link: '',\n                    imageUrl: 'http://placehold.it/134x89',\n                    ruleBelow: true,\n                    ruleAbove: false,\n                };\n                break;\n             case 'quote' :\n                vueData = {\n                    quote: 'Lorem quote',\n                    quoter: 'Lorem quoter',\n                    link: '',\n                };\n                break;\n             case 'date' :\n                vueData = {\n                    date: 'Lorem',\n                };\n                break;\n             case 'section-title' :\n                vueData = {\n                    section_title: 'More stories',\n                };\n                break;\n        }\n\n        return vueData;\n    };\n\n    $('select#articleType').change(render);\n\n    $('#workspace').on('click', '#refresh', render);\n\n    // kick things off\n    render();\n\n});\n"],"sourceRoot":"/source/"}